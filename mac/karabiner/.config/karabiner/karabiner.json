{
    "profiles": [
        {
            "complex_modifications": {
                "rules": [
                    {
                        "description": "Hotstrings",
                        "manipulators": [
                            {
                                "from": {
                                    "key_code": "u",
                                    "modifiers": {
                                        "mandatory": ["fn"],
                                        "optional": ["any"]
                                    }
                                },
                                "to": [{ "shell_command": "osascript ~/.dotfiles/mac/karabiner/.config/karabiner/not-for-sharing/red-login.scpt" }],
                                "type": "basic"
                            },
                            {
                                "from": {
                                    "key_code": "p",
                                    "modifiers": {
                                        "mandatory": ["fn"],
                                        "optional": ["any"]
                                    }
                                },
                                "to": [{ "shell_command": "osascript ~/.dotfiles/mac/karabiner/.config/karabiner/not-for-sharing/red-pass.scpt" }],
                                "type": "basic"
                            },
                            {
                                "from": {
                                    "key_code": "2",
                                    "modifiers": {
                                        "mandatory": ["fn"],
                                        "optional": ["any"]
                                    }
                                },
                                "to": [{ "shell_command": "osascript ~/.dotfiles/mac/karabiner/.config/karabiner/not-for-sharing/red-email.scpt" }],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "Modifiers: Caps Lock",
                        "manipulators": [
                            {
                                "from": {
                                    "key_code": "caps_lock",
                                    "modifiers": { "optional": ["any"] }
                                },
                                "to": [{ "key_code": "left_control" }],
                                "to_if_alone": [
                                    { "key_code": "escape" },
                                    { "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }
                                ],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "Modifiers: Command",
                        "manipulators": [
                            {
                                "from": { "key_code": "left_command", "modifiers": { "optional": ["any"] } },
                                "to": [ { "key_code": "left_option" } ],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "Modifiers: Left_Shift + Right_Shift",
                        "manipulators": [
                            {
                                "from": { "key_code": "left_shift", "modifiers": { "mandatory": ["right_shift"] } },
                                "to": [ { "key_code": "spacebar", "modifiers": ["left_command"] } ],
                                "type": "basic"
                            },
                            {
                                "from": { "key_code": "right_shift", "modifiers": { "mandatory": ["left_shift"] } },
                                "to": [ { "key_code": "spacebar", "modifiers": ["left_command"] } ],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "Modifiers: Any Shift to App layout when tapped",
                        "manipulators": [
                            {
                                "conditions": [ { "input_sources": [{ "language": "apw" }], "type": "input_source_if" } ],
                                "from": { "key_code": "left_shift", "modifiers": { "optional": ["any"] } },
                                "to": [{ "shell_command": "open -a 'Microsoft Edge'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "from": { "key_code": "left_shift", "modifiers": { "optional": ["any"] } },
                                "to": [{ "key_code": "left_shift" }],
                                "to_if_alone": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.Apache" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "apw" }], "type": "input_source_if" } ],
                                "from": { "key_code": "right_shift", "modifiers": { "optional": ["any"] } },
                                "to": [{ "shell_command": "open -a 'IntelliJ IDEA'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "from": { "key_code": "right_shift", "modifiers": { "optional": ["any"] } },
                                "to": [{ "key_code": "right_shift" }],
                                "to_if_alone": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.Apache" }],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "TabFN: Init",
                        "manipulators": [
                            {
                                "from": { "key_code": "tab", "modifiers": { "optional": ["any"] } },
                                "to": [
                                    { "set_variable": { "name": "tabfn_mode", "value": 1 } },
                                    { "key_code": "left_option" }
                                ],
                                "to_after_key_up": [ { "set_variable": { "name": "tabfn_mode", "value": 0 } } ],
                                "to_if_alone": [ { "key_code": "tab", "modifiers": ["left_command"] } ],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "TabFN: Space to Shift, Tab on tap",
                        "manipulators": [
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "spacebar" },
                                "to": [{ "key_code": "left_shift" }],
                                "to_if_alone": [{ "key_code": "tab" }],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "TabFN: '>'|'<'",
                        "manipulators": [
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "comma", "modifiers": { "optional": ["any"] } },
                                "to": [ { "key_code": "left_arrow", "modifiers": ["left_command"] } ],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "period", "modifiers": { "optional": ["any"] } },
                                "to": [ { "key_code": "right_arrow", "modifiers": ["right_command"] } ],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "TabFN: Tab+[hjkl] to Left, Down, Up, Right",
                        "manipulators": [
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "h", "modifiers": { "optional": ["any"] } },
                                "to": [{ "key_code": "left_arrow" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "j", "modifiers": { "optional": ["any"] } },
                                "to": [{ "key_code": "down_arrow" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "k", "modifiers": { "optional": ["any"] } },
                                "to": [{ "key_code": "up_arrow" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "l", "modifiers": { "optional": ["any"] } },
                                "to": [{ "key_code": "right_arrow" }],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "TabFN: Tab+n/p for tabs management",
                        "manipulators": [
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "n", "modifiers": { "optional": ["any"] } },
                                "to": [ { "key_code": "tab", "modifiers": ["left_control"] } ],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "p", "modifiers": { "optional": ["any"] } },
                                "to": [ { "key_code": "tab", "modifiers": ["left_control", "left_shift"] } ],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "TabFN: Tab+Backtab to Forward Delete",
                        "manipulators": [
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "delete_or_backtab", "modifiers": { "optional": ["any"] } },
                                "to": [{ "key_code": "delete_forward" }],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "TabFN: Language layouts",
                        "manipulators": [
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "e", "modifiers": { "optional": ["any"] } },
                                "to": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "r", "modifiers": { "optional": ["any"] } },
                                "to": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.RussianWin" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "w", "modifiers": { "optional": ["any"] } },
                                "to": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.Wolastoqey" }],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "TabFN: Reload Karabiner configuration",
                        "manipulators": [
                            {
                                "conditions": [ { "name": "tabfn_mode", "type": "variable_if", "value": 1 } ],
                                "from": { "key_code": "slash", "modifiers": { "optional": ["any"] } },
                                "to": [{ "shell_command": "/opt/homebrew/bin/terminal-notifier -title 'Config reloaded' -message 'Karabiner config has been reloaded' && launchctl kickstart -k gui/`id -u`/org.pqrs.service.agent.karabiner_console_user_server " }],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "TabFN: Local List Function",
                        "manipulators": [
                            {
                                "conditions": [
                                    { "name": "tabfn_mode", "type": "variable_if", "value": 1 },
                                    {
                                        "bundle_identifiers": [
                                            "^com\\.jetbrains\\.intellij"
                                        ],
                                        "type": "frontmost_application_if"
                                    }
                                ],
                                "from": { "key_code": "f" },
                                "to": [{ "key_code": "f13" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [
                                    { "name": "tabfn_mode", "type": "variable_if", "value": 1 },
                                    {
                                        "bundle_identifiers": [
                                            "^com\\.microsoft\\.edge"
                                        ],
                                        "type": "frontmost_application_if"
                                    }
                                ],
                                "from": { "key_code": "f" },
                                "to": [{ "shell_command": "open -a 'Terminal'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "Apps Layout",
                        "manipulators": [
                            {
                                "conditions": [
                                    { "input_sources": [{ "language": "apw" }], "type": "input_source_if" },
                                    {
                                        "bundle_identifiers": [
                                            "^com\\.jetbrains\\.intellij"
                                        ],
                                        "type": "frontmost_application_if"
                                    }
                                ],
                                "from": { "key_code": "spacebar", "modifiers": { "optional": ["any"] } },
                                "to": [{ "key_code": "f13" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [
                                    { "input_sources": [{ "language": "apw" }], "type": "input_source_if" },
                                    {
                                        "bundle_identifiers": [
                                            "^com\\.microsoft\\.edge"
                                        ],
                                        "type": "frontmost_application_if"
                                    }
                                ],
                                "from": { "key_code": "spacebar", "modifiers": { "optional": ["any"] } },
                                "to": [{ "shell_command": "open -a 'Terminal'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [
                                    {
                                        "input_sources": [{ "language": "apw" }],
                                        "type": "input_source_if"
                                    }
                                ],
                                "from": {
                                    "key_code": "w",
                                    "modifiers": { "optional": ["any"] }
                                },
                                "to": [{ "shell_command": "open -a 'Warp'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [
                                    {
                                        "input_sources": [{ "language": "apw" }],
                                        "type": "input_source_if"
                                    }
                                ],
                                "from": {
                                    "key_code": "c",
                                    "modifiers": { "mandatory": ["left_control"] }
                                },
                                "to": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [
                                    {
                                        "input_sources": [{ "language": "apw" }],
                                        "type": "input_source_if"
                                    }
                                ],
                                "from": {
                                    "key_code": "c",
                                    "modifiers": { "optional": ["any"] }
                                },
                                "to": [{ "shell_command": "open -a 'Cursor'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [
                                    {
                                        "input_sources": [{ "language": "apw" }],
                                        "type": "input_source_if"
                                    }
                                ],
                                "from": {
                                    "key_code": "n",
                                    "modifiers": { "optional": ["any"] }
                                },
                                "to": [{ "shell_command": "open -a 'Obsidian'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [
                                    {
                                        "input_sources": [{ "language": "apw" }],
                                        "type": "input_source_if"
                                    }
                                ],
                                "from": {
                                    "key_code": "o",
                                    "modifiers": { "optional": ["any"] }
                                },
                                "to": [{ "shell_command": "open -a 'OBS'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [
                                    {
                                        "input_sources": [{ "language": "apw" }],
                                        "type": "input_source_if"
                                    }
                                ],
                                "from": {
                                    "key_code": "b",
                                    "modifiers": { "optional": ["any"] }
                                },
                                "to": [{ "shell_command": "open -a 'Bruno'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [
                                    {
                                        "input_sources": [{ "language": "apw" }],
                                        "type": "input_source_if"
                                    }
                                ],
                                "from": {
                                    "key_code": "t",
                                    "modifiers": { "optional": ["any"] }
                                },
                                "to": [{ "shell_command": "open -a 'Telegram'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [
                                    {
                                        "input_sources": [{ "language": "apw" }],
                                        "type": "input_source_if"
                                    }
                                ],
                                "from": {
                                    "key_code": "r",
                                    "modifiers": { "optional": ["any"] }
                                },
                                "to": [{ "shell_command": "open -a 'Rocket'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [
                                    {
                                        "input_sources": [{ "language": "apw" }],
                                        "type": "input_source_if"
                                    }
                                ],
                                "from": {
                                    "key_code": "k",
                                    "modifiers": { "optional": ["any"] }
                                },
                                "to": [{ "shell_command": "open -a 'KTalk'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [
                                    {
                                        "input_sources": [{ "language": "apw" }],
                                        "type": "input_source_if"
                                    }
                                ],
                                "from": {
                                    "key_code": "a",
                                    "modifiers": { "optional": ["any"] }
                                },
                                "to": [{ "shell_command": "open -a 'Activity Monitor'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [
                                    {
                                        "input_sources": [{ "language": "apw" }],
                                        "type": "input_source_if"
                                    }
                                ],
                                "from": {
                                    "key_code": "m",
                                    "modifiers": { "optional": ["any"] }
                                },
                                "to": [{ "shell_command": "open -a 'iPhone Mirroring'" }],
                                "to_after_key_up": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "Space",
                        "manipulators": [
                            {
                                "from": { "key_code": "spacebar", "modifiers": { "optional": ["any"] } },
                                "to": { "key_code": "left_command" },
                                "to_if_alone": [{ "key_code": "spacebar" }],
                                "type": "basic"
                            }
                        ]
                    },
                    {
                        "description": "Windows Control Layout",
                        "manipulators": [
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "c", "modifiers": { "mandatory": ["left_control"] } },
                                "to": [{ "shell_command": "/opt/homebrew/bin/im-select com.apple.keylayout.US" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "1" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=maximize\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "2" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=almost-maximize\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "3" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=top-right\" && open -g \"rectangle://execute-action?name=center\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "4" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=top-right-sixth\" && open -g \"rectangle://execute-action?name=center\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "h" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=move-left\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "j" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=move-down\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "k" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=move-up\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "l" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=move-right\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "u" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=maximize-height\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "n" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=next-display\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "hyphen" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=smaller\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "equal_sign" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=larger\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "c" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=center\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "m" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=maximize\"" }],
                                "type": "basic"
                            },
                            {
                                "conditions": [ { "input_sources": [{ "language": "pqm" }], "type": "input_source_if" } ],
                                "from": { "key_code": "r" },
                                "to": [{ "shell_command": "open -g \"rectangle://execute-action?name=restore\"" }],
                                "type": "basic"
                            }
                        ]
                    }
                ]
            },
            "fn_function_keys": [
                {
                    "from": { "key_code": "f6" },
                    "to": [{ "key_code": "f19" }]
                }
            ],
            "name": "Default profile",
            "selected": true,
            "virtual_hid_keyboard": { "keyboard_type_v2": "ansi" }
        }
    ]
}